{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "title": "AgentConfiguration",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "HalGuru": {
      "$ref": "#/definitions/HalGuruHeader"
    },
    "Agent": {
      "$ref": "#/definitions/Agent"
    },
    "Messages": {
      "type": "object",
      "additionalProperties": {
        "type": "string"
      }
    },
    "Prompts": {
      "type": "object",
      "additionalProperties": {
        "type": "string"
      }
    },
    "LlmConnectors": {
      "type": "object",
      "additionalProperties": {
        "$ref": "#/definitions/LlmConnector"
      }
    },
    "Secrets": {
      "type": "object",
      "additionalProperties": {
        "type": "string"
      }
    },
    "Session": {
      "oneOf": [
        {
          "type": "null"
        },
        {
          "$ref": "#/definitions/AgentSession"
        }
      ]
    },
    "Variables": {
      "type": "object",
      "additionalProperties": {
        "type": "string"
      }
    },
    "Tests": {
      "type": "object",
      "additionalProperties": {
        "$ref": "#/definitions/AgentTest"
      }
    }
  },
  "definitions": {
    "HalGuruHeader": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "FilePurpose": {
          "type": [
            "null",
            "string"
          ]
        },
        "PlatformVersion": {
          "type": [
            "null",
            "string"
          ]
        },
        "PlatformUrl": {
          "type": [
            "null",
            "string"
          ]
        },
        "AutogeneratedAgentUrl": {
          "type": [
            "null",
            "string"
          ]
        }
      }
    },
    "Agent": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "Name",
        "Type",
        "Version"
      ],
      "properties": {
        "Id": {
          "type": "string",
          "format": "guid"
        },
        "Name": {
          "title": "Agent Name",
          "type": "string",
          "maxLength": 50,
          "minLength": 6
        },
        "Type": {
          "title": "Type of the Agent",
          "$ref": "#/definitions/AgentType"
        },
        "Version": {
          "title": "Version of the Agent",
          "type": "string",
          "default": "1.0.0",
          "minLength": 1,
          "pattern": "v?\\d+\\.\\d+(\\.\\d+)?(-[a-zA-Z0-9\\.]+)?(\\+[a-zA-Z0-9\\.]+)?"
        },
        "Description": {
          "title": "Description of the Agent",
          "type": [
            "null",
            "string"
          ]
        },
        "Author": {
          "title": "Author of the Agent",
          "$ref": "#/definitions/Author"
        },
        "Start": {
          "title": "Start configuration for the Agent",
          "$ref": "#/definitions/Start"
        },
        "Themes": {
          "title": "Themes for the Agent",
          "type": "object",
          "x-dictionaryKey": {
            "$ref": "#/definitions/Theme"
          },
          "additionalProperties": {
            "$ref": "#/definitions/ThemeDesign"
          }
        },
        "UserInterface": {
          "title": "User Interface Design for the Agent",
          "$ref": "#/definitions/AgentUIDesign"
        },
        "Features": {
          "title": "Features of the Agent",
          "$ref": "#/definitions/AgentFeatures"
        }
      }
    },
    "AgentType": {
      "type": "integer",
      "description": "",
      "x-enumNames": [
        "Basic"
      ],
      "enum": [
        0
      ]
    },
    "Author": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Name": {
          "type": [
            "null",
            "string"
          ]
        },
        "Email": {
          "type": [
            "null",
            "string"
          ]
        },
        "Url": {
          "type": [
            "null",
            "string"
          ]
        },
        "Company": {
          "type": [
            "null",
            "string"
          ]
        },
        "Copyright": {
          "type": [
            "null",
            "string"
          ]
        }
      }
    },
    "Start": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "LlmConnectorId"
      ],
      "properties": {
        "LlmConnectorId": {
          "title": "Id of the LLM connector",
          "type": "string",
          "description": "Identifier of the LLM connector to be used from the LlmConnectors list.",
          "default": "",
          "maxLength": 50,
          "minLength": 6
        },
        "PromptId": {
          "type": [
            "null",
            "string"
          ],
          "description": "Identifier of the prompt to be used during the agent's initialization process."
        },
        "Url": {
          "type": [
            "null",
            "string"
          ],
          "description": "URL associated with the start configuration of the agent.",
          "format": "uri"
        }
      }
    },
    "Theme": {
      "type": "integer",
      "description": "",
      "x-enumNames": [
        "Light",
        "Dark"
      ],
      "enum": [
        0,
        1
      ]
    },
    "ThemeDesign": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Messages": {
          "type": [
            "null",
            "object"
          ],
          "x-dictionaryKey": {
            "$ref": "#/definitions/ChatMessageType"
          },
          "additionalProperties": {
            "$ref": "#/definitions/ChatMessageTheme"
          }
        }
      }
    },
    "ChatMessageType": {
      "type": "integer",
      "description": "",
      "x-enumNames": [
        "User",
        "Agent",
        "System",
        "Busy",
        "Error",
        "Owner"
      ],
      "enum": [
        0,
        1,
        2,
        3,
        4,
        5
      ]
    },
    "ChatMessageTheme": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "IconCssClass": {
          "type": [
            "null",
            "string"
          ]
        },
        "IconColor": {
          "type": [
            "null",
            "string"
          ]
        },
        "IconUrl": {
          "type": [
            "null",
            "string"
          ]
        },
        "BackgroundColor": {
          "type": [
            "null",
            "string"
          ]
        },
        "TextColor": {
          "type": [
            "null",
            "string"
          ]
        }
      }
    },
    "AgentUIDesign": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "DisableCloseButton": {
          "type": [
            "boolean",
            "null"
          ]
        }
      }
    },
    "AgentFeatures": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "CheckAllUrls": {
          "type": [
            "boolean",
            "null"
          ]
        },
        "CheckIsAnswerCorrect": {
          "type": [
            "boolean",
            "null"
          ]
        },
        "CheckIsLastUrlCorrectAnswer": {
          "type": [
            "boolean",
            "null"
          ]
        },
        "CommentCurrentUrl": {
          "type": [
            "boolean",
            "null"
          ]
        },
        "PerChannelThreading": {
          "type": [
            "boolean",
            "null"
          ]
        },
        "MaxRetryAttempts": {
          "type": [
            "integer",
            "null"
          ],
          "format": "int32"
        }
      }
    },
    "LlmConnector": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "LlmProvider": {
          "$ref": "#/definitions/LlmProvider"
        },
        "Model": {
          "type": "string"
        },
        "Temperature": {
          "type": "number",
          "format": "double"
        },
        "MaxTokens": {
          "type": "integer",
          "format": "int32"
        },
        "AssistantId": {
          "type": [
            "null",
            "string"
          ]
        },
        "VectorStoreId": {
          "type": [
            "null",
            "string"
          ]
        },
        "ApiKey": {
          "type": [
            "null",
            "string"
          ]
        },
        "InstructionsPrompt": {
          "type": [
            "null",
            "string"
          ]
        },
        "Tools": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "ApiUrl": {
          "type": [
            "null",
            "string"
          ]
        }
      }
    },
    "LlmProvider": {
      "type": "integer",
      "description": "",
      "x-enumNames": [
        "Echo",
        "OpenAIChat",
        "OpenAIAssistant",
        "LMStudio",
        "XAI",
        "DeepSeek",
        "Azure",
        "Google"
      ],
      "enum": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7
      ]
    },
    "AgentSession": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Started": {
          "type": [
            "null",
            "string"
          ],
          "format": "date-time"
        },
        "LastAccess": {
          "type": [
            "null",
            "string"
          ],
          "format": "date-time"
        },
        "IsStarted": {
          "type": [
            "boolean",
            "null"
          ]
        },
        "ThreadId": {
          "type": [
            "null",
            "string"
          ]
        },
        "LlmConnector": {
          "type": [
            "null",
            "string"
          ]
        },
        "Prompt": {
          "type": [
            "null",
            "string"
          ]
        },
        "Url": {
          "type": [
            "null",
            "string"
          ]
        },
        "Language": {
          "type": [
            "null",
            "string"
          ]
        },
        "Description": {
          "type": [
            "null",
            "string"
          ]
        },
        "Variables": {
          "type": [
            "null",
            "object"
          ],
          "additionalProperties": {
            "type": "string"
          }
        }
      }
    },
    "AgentTest": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "QuestionMessage": {
          "type": "string"
        },
        "AnswerMessageContains": {
          "type": [
            "array",
            "null"
          ],
          "items": {
            "type": "string"
          }
        },
        "AnswerMessageRegex": {
          "type": [
            "null",
            "string"
          ]
        }
      }
    }
  }
}
{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "title": "AgentConfiguration",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "HalGuru": {
      "$ref": "#/definitions/HalGuruHeader"
    },
    "Agent": {
      "$ref": "#/definitions/Agent"
    },
    "Messages": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/AgentStaticMessage"
      }
    },
    "Prompts": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/AgentPrompt"
      }
    },
    "LlmConnectors": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/LlmConnector"
      }
    },
    "Secrets": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/AgentSecret"
      }
    },
    "Session": {
      "oneOf": [
        {
          "type": "null"
        },
        {
          "$ref": "#/definitions/AgentSession"
        }
      ]
    },
    "Tests": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/AgentTest"
      }
    }
  },
  "definitions": {
    "HalGuruHeader": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "FilePurpose": {
          "type": [
            "null",
            "string"
          ]
        },
        "PlatformVersion": {
          "type": [
            "null",
            "string"
          ]
        },
        "PlatformUrl": {
          "type": [
            "null",
            "string"
          ]
        },
        "AutogeneratedAgentUrl": {
          "type": [
            "null",
            "string"
          ]
        }
      }
    },
    "Agent": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "Name",
        "Type",
        "Version",
        "Start",
        "Themes",
        "UserInterface",
        "Features"
      ],
      "properties": {
        "Id": {
          "type": "string",
          "format": "guid"
        },
        "Name": {
          "title": "Agent Name",
          "type": "string",
          "maxLength": 50,
          "minLength": 6
        },
        "Type": {
          "title": "Type of the Agent",
          "$ref": "#/definitions/AgentType"
        },
        "Version": {
          "title": "Version of the Agent",
          "type": "string",
          "default": "1.0.0",
          "minLength": 1,
          "pattern": "v?\\d+\\.\\d+(\\.\\d+)?(-[a-zA-Z0-9\\.]+)?(\\+[a-zA-Z0-9\\.]+)?"
        },
        "Description": {
          "title": "Description of the Agent",
          "type": [
            "null",
            "string"
          ]
        },
        "Author": {
          "title": "Author of the Agent",
          "$ref": "#/definitions/AgentAuthor"
        },
        "Start": {
          "title": "Agent Start Configuration",
          "description": "The starting configuration for the agent.",
          "$ref": "#/definitions/AgentStart"
        },
        "Themes": {
          "title": "Agent Themes",
          "type": "array",
          "description": "The collection of themes and their associated designs for the agent.",
          "items": {
            "$ref": "#/definitions/ThemeDesign"
          }
        },
        "UserInterface": {
          "title": "Agent User Interface",
          "description": "The user interface design configuration for the agent.",
          "$ref": "#/definitions/AgentUIDesign"
        },
        "Features": {
          "title": "Agent Features",
          "description": "The features and capabilities of the agent.",
          "$ref": "#/definitions/AgentFeatures"
        }
      }
    },
    "AgentType": {
      "type": "integer",
      "description": "",
      "x-enumNames": [
        "Basic"
      ],
      "enum": [
        0
      ]
    },
    "AgentAuthor": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Name": {
          "type": [
            "null",
            "string"
          ]
        },
        "Email": {
          "type": [
            "null",
            "string"
          ]
        },
        "Url": {
          "type": [
            "null",
            "string"
          ]
        },
        "Company": {
          "type": [
            "null",
            "string"
          ]
        },
        "Copyright": {
          "type": [
            "null",
            "string"
          ]
        }
      }
    },
    "AgentStart": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "LlmConnector"
      ],
      "properties": {
        "LlmConnector": {
          "title": "LLM Connector Name",
          "type": "string",
          "description": "Name of the LLM connector to be used from the LlmConnectors list.",
          "default": "",
          "maxLength": 50,
          "minLength": 6
        },
        "Prompt": {
          "type": [
            "null",
            "string"
          ],
          "description": "Name of the prompt to be used during the agent's initialization process."
        },
        "Url": {
          "type": [
            "null",
            "string"
          ],
          "description": "URL associated with the start configuration of the agent.",
          "format": "uri"
        }
      }
    },
    "ThemeDesign": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "Theme",
        "Messages"
      ],
      "properties": {
        "Theme": {
          "title": "Theme",
          "description": "The visual theme for the design configuration - Light or Dark.",
          "default": 0,
          "$ref": "#/definitions/Theme"
        },
        "Messages": {
          "title": "Messages (Theme Design)",
          "type": "array",
          "description": "Chat message themes associated with the theme design.",
          "items": {
            "$ref": "#/definitions/ChatMessageTheme"
          }
        }
      }
    },
    "Theme": {
      "type": "integer",
      "description": "",
      "x-enumNames": [
        "Light",
        "Dark"
      ],
      "enum": [
        0,
        1
      ]
    },
    "ChatMessageTheme": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "MessageType": {
          "$ref": "#/definitions/ChatMessageType"
        },
        "IconCssClass": {
          "type": [
            "null",
            "string"
          ]
        },
        "IconColor": {
          "type": [
            "null",
            "string"
          ]
        },
        "IconUrl": {
          "type": [
            "null",
            "string"
          ]
        },
        "BackgroundColor": {
          "type": [
            "null",
            "string"
          ]
        },
        "TextColor": {
          "type": [
            "null",
            "string"
          ]
        }
      }
    },
    "ChatMessageType": {
      "type": "integer",
      "description": "",
      "x-enumNames": [
        "User",
        "Agent",
        "System",
        "Busy",
        "Error",
        "Owner"
      ],
      "enum": [
        0,
        1,
        2,
        3,
        4,
        5
      ]
    },
    "AgentUIDesign": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "DisableCloseButton": {
          "type": [
            "boolean",
            "null"
          ]
        }
      }
    },
    "AgentFeatures": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "CheckAllUrls": {
          "type": [
            "boolean",
            "null"
          ]
        },
        "CheckIsAnswerCorrect": {
          "type": [
            "boolean",
            "null"
          ]
        },
        "CheckIsLastUrlCorrectAnswer": {
          "type": [
            "boolean",
            "null"
          ]
        },
        "CommentCurrentUrl": {
          "type": [
            "boolean",
            "null"
          ]
        },
        "PerChannelThreading": {
          "type": [
            "boolean",
            "null"
          ]
        },
        "MaxRetryAttempts": {
          "type": [
            "integer",
            "null"
          ],
          "format": "int32"
        }
      }
    },
    "AgentStaticMessage": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "Name",
        "Message"
      ],
      "properties": {
        "Name": {
          "title": "Name",
          "type": "string",
          "description": "The name of the static message for the agent.",
          "minLength": 1
        },
        "Message": {
          "title": "Message",
          "type": "string",
          "description": "Content of the static message for the agent.",
          "minLength": 1
        }
      }
    },
    "AgentPrompt": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "Name",
        "Prompt"
      ],
      "properties": {
        "Name": {
          "type": "string",
          "description": "The name of the prompt.",
          "maxLength": 20,
          "minLength": 6
        },
        "Prompt": {
          "type": "string",
          "description": "The text content of the prompt.",
          "minLength": 1
        }
      }
    },
    "LlmConnector": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Name": {
          "type": "string"
        },
        "LlmProvider": {
          "$ref": "#/definitions/LlmProvider"
        },
        "Model": {
          "type": "string"
        },
        "Temperature": {
          "type": "number",
          "format": "double"
        },
        "MaxTokens": {
          "type": "integer",
          "format": "int32"
        },
        "AssistantId": {
          "type": [
            "null",
            "string"
          ]
        },
        "VectorStoreId": {
          "type": [
            "null",
            "string"
          ]
        },
        "ApiKey": {
          "type": [
            "null",
            "string"
          ]
        },
        "InstructionsPrompt": {
          "type": [
            "null",
            "string"
          ]
        },
        "Tools": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "ApiUrl": {
          "type": [
            "null",
            "string"
          ]
        }
      }
    },
    "LlmProvider": {
      "type": "integer",
      "description": "",
      "x-enumNames": [
        "Echo",
        "OpenAIChat",
        "OpenAIAssistant",
        "LMStudio",
        "XAI",
        "DeepSeek",
        "Azure",
        "Google"
      ],
      "enum": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7
      ]
    },
    "AgentSecret": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "Key",
        "Secret"
      ],
      "properties": {
        "Key": {
          "title": "Secret Key",
          "type": "string",
          "description": "The name of the secret key.",
          "minLength": 1,
          "pattern": "^[a-zA-Z0-9_\\-]+$"
        },
        "Secret": {
          "title": "Secret Value",
          "type": "string",
          "description": "The value of the secret key.",
          "minLength": 1
        }
      }
    },
    "AgentSession": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Started": {
          "type": [
            "null",
            "string"
          ],
          "format": "date-time"
        },
        "LastAccess": {
          "type": [
            "null",
            "string"
          ],
          "format": "date-time"
        },
        "IsStarted": {
          "type": [
            "boolean",
            "null"
          ]
        },
        "ThreadId": {
          "type": [
            "null",
            "string"
          ]
        },
        "LlmConnector": {
          "type": [
            "null",
            "string"
          ]
        },
        "Prompt": {
          "type": [
            "null",
            "string"
          ]
        },
        "Url": {
          "type": [
            "null",
            "string"
          ]
        },
        "Language": {
          "type": [
            "null",
            "string"
          ]
        },
        "Description": {
          "type": [
            "null",
            "string"
          ]
        },
        "Variables": {
          "type": [
            "null",
            "object"
          ],
          "additionalProperties": {
            "type": "string"
          }
        }
      }
    },
    "AgentTest": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "Name",
        "QuestionMessage"
      ],
      "properties": {
        "Name": {
          "title": "Test Name",
          "type": "string",
          "description": "The name of the test case.",
          "minLength": 1
        },
        "QuestionMessage": {
          "title": "Question Message",
          "type": "string",
          "description": "The question or input message directed to the agent.",
          "minLength": 1
        },
        "AnswerMessageContains": {
          "title": "Answer Message Contains",
          "type": [
            "array",
            "null"
          ],
          "description": "A list of substrings that the output message is expected to contain.",
          "items": {
            "type": "string"
          }
        },
        "AnswerMessageRegex": {
          "title": "Answer Message Regex",
          "type": [
            "null",
            "string"
          ],
          "description": "A regular expression pattern that the agent's response should conform to."
        }
      }
    }
  }
}
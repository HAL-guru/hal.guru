{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "title": "AgentConfiguration",
  "type": "object",
  "description": "The full configuration of an agent.",
  "additionalProperties": false,
  "properties": {
    "HalGuru": {
      "type": "object",
      "description": "Header information for the hal.guru platform. Don't change this.",
      "additionalProperties": false,
      "properties": {
        "FilePurpose": {
          "type": "string",
          "x-nullable": true
        },
        "PlatformVersion": {
          "type": "string",
          "x-nullable": true
        },
        "PlatformUrl": {
          "type": "string",
          "x-nullable": true
        },
        "AutogeneratedAgentUrl": {
          "type": "string",
          "x-nullable": true
        }
      }
    },
    "Agent": {
      "type": "object",
      "description": "The agent configuration.",
      "additionalProperties": false,
      "required": [
        "Name",
        "Type",
        "Version",
        "Start",
        "Themes",
        "UserInterface",
        "Features"
      ],
      "properties": {
        "Id": {
          "type": "string",
          "format": "guid"
        },
        "Name": {
          "title": "Agent Name",
          "type": "string",
          "maxLength": 50,
          "minLength": 6
        },
        "Type": {
          "title": "Type of the Agent",
          "type": "integer",
          "description": "",
          "x-enumNames": [
            "Basic"
          ],
          "enum": [
            0
          ]
        },
        "Version": {
          "title": "Version of the Agent",
          "type": "string",
          "default": "1.0.0",
          "minLength": 1,
          "pattern": "v?\\d+\\.\\d+(\\.\\d+)?(-[a-zA-Z0-9\\.]+)?(\\+[a-zA-Z0-9\\.]+)?"
        },
        "Description": {
          "title": "Description of the Agent",
          "type": "string",
          "x-nullable": true
        },
        "Author": {
          "title": "Author of the Agent",
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "Name": {
              "type": "string",
              "x-nullable": true
            },
            "Email": {
              "type": "string",
              "x-nullable": true
            },
            "Url": {
              "type": "string",
              "x-nullable": true
            },
            "Company": {
              "type": "string",
              "x-nullable": true
            },
            "Copyright": {
              "type": "string",
              "x-nullable": true
            }
          }
        },
        "Start": {
          "title": "Agent Start Configuration",
          "type": "object",
          "description": "The starting configuration for the agent.",
          "additionalProperties": false,
          "required": [
            "LlmConnector"
          ],
          "properties": {
            "LlmConnector": {
              "title": "LLM Connector Name",
              "type": "string",
              "description": "Name of the LLM connector to be used from the LlmConnectors list.",
              "default": "",
              "maxLength": 50,
              "minLength": 6
            },
            "Prompt": {
              "type": "string",
              "description": "Name of the prompt to be used during the agent's initialization process.",
              "x-nullable": true
            },
            "Url": {
              "type": "string",
              "description": "URL associated with the start configuration of the agent.",
              "format": "uri",
              "x-nullable": true
            }
          }
        },
        "Themes": {
          "title": "Agent Themes",
          "type": "array",
          "description": "The collection of themes and their associated designs for the agent.",
          "items": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "Theme",
              "Messages"
            ],
            "properties": {
              "Theme": {
                "title": "Theme",
                "type": "integer",
                "description": "",
                "default": 0,
                "x-enumNames": [
                  "Light",
                  "Dark"
                ],
                "enum": [
                  0,
                  1
                ]
              },
              "Messages": {
                "title": "Messages (Theme Design)",
                "type": "array",
                "description": "Chat message themes associated with the theme design.",
                "items": {
                  "type": "object",
                  "additionalProperties": false,
                  "properties": {
                    "MessageType": {
                      "type": "integer",
                      "description": "",
                      "x-enumNames": [
                        "User",
                        "Agent",
                        "System",
                        "Busy",
                        "Error",
                        "Owner"
                      ],
                      "enum": [
                        0,
                        1,
                        2,
                        3,
                        4,
                        5
                      ]
                    },
                    "IconCssClass": {
                      "type": "string",
                      "x-nullable": true
                    },
                    "IconColor": {
                      "type": "string",
                      "x-nullable": true
                    },
                    "IconUrl": {
                      "type": "string",
                      "x-nullable": true
                    },
                    "BackgroundColor": {
                      "type": "string",
                      "x-nullable": true
                    },
                    "TextColor": {
                      "type": "string",
                      "x-nullable": true
                    }
                  }
                }
              }
            }
          }
        },
        "UserInterface": {
          "title": "Agent User Interface",
          "type": "object",
          "description": "The user interface design configuration for the agent.",
          "additionalProperties": false,
          "properties": {
            "DisableCloseButton": {
              "type": "boolean",
              "x-nullable": true
            }
          }
        },
        "Features": {
          "title": "Agent Features",
          "type": "object",
          "description": "The features and capabilities of the agent.",
          "additionalProperties": false,
          "properties": {
            "CheckAllUrls": {
              "type": "boolean",
              "x-nullable": true
            },
            "CheckIsAnswerCorrect": {
              "type": "boolean",
              "x-nullable": true
            },
            "CheckIsLastUrlCorrectAnswer": {
              "type": "boolean",
              "x-nullable": true
            },
            "CommentCurrentUrl": {
              "type": "boolean",
              "x-nullable": true
            },
            "PerChannelThreading": {
              "type": "boolean",
              "x-nullable": true
            },
            "MaxRetryAttempts": {
              "type": "integer",
              "format": "int32",
              "x-nullable": true
            }
          }
        }
      }
    },
    "Messages": {
      "type": "array",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": [
          "Name",
          "Message"
        ],
        "properties": {
          "Name": {
            "title": "Name",
            "type": "string",
            "description": "The name of the static message for the agent.",
            "minLength": 1
          },
          "Message": {
            "title": "Message",
            "type": "string",
            "description": "Content of the static message for the agent.",
            "minLength": 1
          }
        }
      }
    },
    "Prompts": {
      "type": "array",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": [
          "Name",
          "Prompt"
        ],
        "properties": {
          "Name": {
            "type": "string",
            "description": "The name of the prompt.",
            "maxLength": 20,
            "minLength": 6
          },
          "Prompt": {
            "type": "string",
            "description": "The text content of the prompt.",
            "minLength": 1
          }
        }
      }
    },
    "LlmConnectors": {
      "type": "array",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "Name": {
            "type": "string"
          },
          "LlmProvider": {
            "type": "integer",
            "description": "",
            "x-enumNames": [
              "Echo",
              "OpenAIChat",
              "OpenAIAssistant",
              "LMStudio",
              "XAI",
              "DeepSeek",
              "Azure",
              "Google"
            ],
            "enum": [
              0,
              1,
              2,
              3,
              4,
              5,
              6,
              7
            ]
          },
          "Model": {
            "type": "string"
          },
          "Temperature": {
            "type": "number",
            "format": "double"
          },
          "MaxTokens": {
            "type": "integer",
            "format": "int32"
          },
          "AssistantId": {
            "type": "string",
            "x-nullable": true
          },
          "VectorStoreId": {
            "type": "string",
            "x-nullable": true
          },
          "ApiKey": {
            "type": "string",
            "x-nullable": true
          },
          "InstructionsPrompt": {
            "type": "string",
            "x-nullable": true
          },
          "Tools": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "ApiUrl": {
            "type": "string",
            "x-nullable": true
          }
        }
      }
    },
    "Secrets": {
      "type": "array",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": [
          "Key",
          "Secret"
        ],
        "properties": {
          "Key": {
            "title": "Secret Key",
            "type": "string",
            "description": "The name of the secret key.",
            "minLength": 1,
            "pattern": "^[a-zA-Z0-9_\\-]+$"
          },
          "Secret": {
            "title": "Secret Value",
            "type": "string",
            "description": "The value of the secret key.",
            "minLength": 1
          }
        }
      }
    },
    "Session": {
      "type": "object",
      "x-nullable": true,
      "additionalProperties": false,
      "properties": {
        "Started": {
          "type": "string",
          "format": "date-time",
          "x-nullable": true
        },
        "LastAccess": {
          "type": "string",
          "format": "date-time",
          "x-nullable": true
        },
        "IsStarted": {
          "type": "boolean",
          "x-nullable": true
        },
        "ThreadId": {
          "type": "string",
          "x-nullable": true
        },
        "LlmConnector": {
          "type": "string",
          "x-nullable": true
        },
        "Prompt": {
          "type": "string",
          "x-nullable": true
        },
        "Url": {
          "type": "string",
          "x-nullable": true
        },
        "Language": {
          "type": "string",
          "x-nullable": true
        },
        "Description": {
          "type": "string",
          "x-nullable": true
        },
        "Variables": {
          "type": "object",
          "x-nullable": true,
          "additionalProperties": {
            "type": "string"
          }
        }
      }
    },
    "Tests": {
      "type": "array",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": [
          "Name",
          "QuestionMessage"
        ],
        "properties": {
          "Name": {
            "title": "Test Name",
            "type": "string",
            "description": "The name of the test case.",
            "minLength": 1
          },
          "QuestionMessage": {
            "title": "Question Message",
            "type": "string",
            "description": "The question or input message directed to the agent.",
            "minLength": 1
          },
          "AnswerMessageContains": {
            "title": "Answer Message Contains",
            "type": "array",
            "description": "A list of substrings that the output message is expected to contain.",
            "x-nullable": true,
            "items": {
              "type": "string"
            }
          },
          "AnswerMessageRegex": {
            "title": "Answer Message Regex",
            "type": "string",
            "description": "A regular expression pattern that the agent's response should conform to.",
            "x-nullable": true
          }
        }
      }
    }
  }
}